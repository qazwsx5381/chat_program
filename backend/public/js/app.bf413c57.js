(function(){"use strict";var e={501:function(e,s,o){var t=o(963),n=o(252),i=o(577);const a={key:0,class:"example-modal-window"},l={class:"main_login"},r=(0,n._)("p",{class:"main_title"},"버튼을 누르면 로그인 창이 열립니다.",-1),c={class:"login_main"},m=(0,n._)("h2",null,"로그인",-1),_={key:0,class:"login"},u=["disabled"],g=["disabled"],d={slot:"footer"},h={class:"connect_server"},p=(0,n._)("span",null,"연결상태",-1),k={key:0,class:"connect_state_true"},w={key:1,class:"connect_state_false"},f={class:"chat_login"},y={class:"name_under_line"},v={key:1},b={class:"chat_room"},C={class:"chat_room_msg_container"},D={class:"chat_room_ul"},O={key:0,class:"msg_common chat_room_myorBot_msg"},S={class:"chat_room_common_name my_name"},I={class:"chat_room_common_message my_message"},x={key:1,class:"msg_common chat_room_myorBot_msg"},M=(0,n._)("span",{class:"chat_room_common_name my_name"},"'익명'",-1),z={class:"chat_room_common_message my_message"},j={key:2,class:"msg_common"},q=(0,n._)("span",{class:"chat_room_common_name chat_room_myorBot_msg"}," 익명 ",-1),J={class:"chat_room_common_message chat_room_other_msg"},H={key:3,class:"msg_common"},T={class:"chat_room_common_name chat_room_myorBot_msg"},Y={class:"chat_room_common_message chat_room_other_msg"},K={ref:"targetRef"},L={key:0,class:"chat_room_form"},U=(0,n._)("label",{for:"ghost",style:{color:"white","margin-right":"10px",width:"50px",display:"flex","align-items":"center"}},"익명",-1),N=["disabled"],V=(0,n._)("label",{for:"ghost",style:{color:"white","margin-right":"10px",width:"50px",display:"flex","align-items":"center"}},"익명",-1),$=["disabled"],B={class:"chat_user_message"},P=(0,n._)("br",null,null,-1),F={class:"chat_user_list"},R=(0,n._)("h2",null,"유저 리스트",-1),W=(0,n._)("hr",null,null,-1),Z={class:"chat_user_list_ul"},A=["onClick"],E=["onClick"],G=(0,n._)("span",{style:{display:"none"},scrollIntoView:""},null,-1),Q={class:"shift_btn_container"};function X(e,s,o,X,ee,se){const oe=(0,n.up)("MyModal");return(0,n.wg)(),(0,n.iD)("div",null,[ee.state?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",a,[(0,n._)("div",l,[r,(0,n._)("button",{onClick:s[0]||(s[0]=(...e)=>se.openModal&&se.openModal(...e)),class:"main_btn"},"로그인")]),ee.modal?((0,n.wg)(),(0,n.j4)(oe,{key:0,onClose:se.closeModal},{default:(0,n.w5)((()=>[(0,n._)("div",c,[m,ee.state?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",_,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=e=>ee.username=e),disabled:ee.state,required:"",onKeyup:s[2]||(s[2]=(0,t.D2)((e=>[se.login(),se.doSend()]),["enter"]))},null,40,u),[[t.nr,ee.username]]),(0,n._)("button",{onClick:s[3]||(s[3]=e=>[se.doSend(),se.login()]),disabled:!ee.username}," 로그인 ",8,g)]))]),(0,n._)("template",d,[(0,n._)("button",{onClick:s[4]||(s[4]=(...e)=>se.doSend&&se.doSend(...e))},"닫기")])])),_:1},8,["onClose"])):(0,n.kq)("",!0)])),(0,n._)("div",h,[p,ee.state?((0,n.wg)(),(0,n.iD)("span",k,(0,i.zw)(ee.state),1)):(0,n.kq)("",!0),ee.state?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("span",w,(0,i.zw)(ee.state),1))]),(0,n._)("article",f,[(0,n.wy)((0,n._)("h2",null,[(0,n._)("span",y,(0,i.zw)(ee.username),1),(0,n.Uk)(" 님! 환영합니다. ")],512),[[t.F8,ee.state]])]),ee.state?((0,n.wg)(),(0,n.iD)("div",v,[(0,n._)("section",b,[(0,n._)("div",C,[(0,n._)("ul",D,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(ee.messages,(e=>((0,n.wg)(),(0,n.iD)(n.HY,{key:e},[!1===e.ghost&&e.user_data===ee.login_id&&e.id===ee.username?((0,n.wg)(),(0,n.iD)("li",O,[(0,n._)("span",S,(0,i.zw)(e.id),1),(0,n._)("p",I,(0,i.zw)(e.message),1)])):!0===e.ghost&&e.user_data===ee.login_id&&e.id===ee.username?((0,n.wg)(),(0,n.iD)("li",x,[M,(0,n._)("p",z,(0,i.zw)(e.message),1)])):!0===e.ghost?((0,n.wg)(),(0,n.iD)("li",j,[q,(0,n._)("p",J,(0,i.zw)(e.message),1)])):((0,n.wg)(),(0,n.iD)("li",H,[(0,n._)("span",T,(0,i.zw)(e.id),1),(0,n._)("p",Y,(0,i.zw)(e.message),1)]))],64)))),128)),(0,n._)("div",K,null,512)])]),ee.state?((0,n.wg)(),(0,n.iD)("div",L,[ee.user_id?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[U,(0,n._)("input",{type:"checkbox",onClick:s[5]||(s[5]=e=>se.ghost()),id:"ghost",style:{"margin-right":"15px"}}),(0,n.wy)((0,n._)("input",{class:"chat_room_input",type:"text","onUpdate:modelValue":s[6]||(s[6]=e=>ee.user_msg=e),disabled:!ee.state,onKeyup:s[7]||(s[7]=(0,t.D2)((e=>[se.send_user_msg(),se.handleClick()]),["enter"])),placeholder:"채팅을 입력하세요",required:""},null,40,N),[[t.nr,ee.user_msg]]),(0,n._)("button",{onClick:s[8]||(s[8]=e=>[se.send_user_msg(),se.handleClick()])},"전송"),(0,n._)("button",{onClick:s[9]||(s[9]=(...e)=>se.leaveChat&&se.leaveChat(...e))},"나가기")],64)):((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[V,(0,n._)("input",{type:"checkbox",onClick:s[10]||(s[10]=e=>se.ghost()),id:"ghost",style:{"margin-right":"15px"}}),(0,n.wy)((0,n._)("input",{class:"chat_room_input",type:"text","onUpdate:modelValue":s[11]||(s[11]=e=>ee.message=e),disabled:!ee.state,onKeyup:s[12]||(s[12]=(0,t.D2)((e=>[se.sendChat()]),["enter"])),placeholder:"채팅을 입력하세요",required:""},null,40,$),[[t.nr,ee.message]]),(0,n._)("button",{onClick:s[13]||(s[13]=e=>[se.sendChat()])},"전송"),(0,n._)("button",{onClick:s[14]||(s[14]=(...e)=>se.leaveChat&&se.leaveChat(...e))},"나가기")],64))])):(0,n.kq)("",!0)]),(0,n._)("section",B,[(0,n._)("h2",null,"개인메세지 "+(0,i.zw)(ee.user_id),1),(0,n._)("ul",null,[(0,n._)("template",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.msg,((e,s)=>((0,n.wg)(),(0,n.iD)("li",{style:{color:"black"},key:s},(0,i.zw)(e.username)+" : "+(0,i.zw)(e.message),1)))),128))])]),(0,n._)("button",{onClick:s[15]||(s[15]=e=>ee.user_id="")},"나가기")]),(0,n._)("article",{class:"menu_icon",onClick:s[16]||(s[16]=e=>ee.isOpen=!ee.isOpen)},[(0,n.Uk)((0,i.zw)(ee.userList.length)+"명",1),P,(0,n.Uk)("접속중 ")]),(0,n.wy)((0,n._)("section",F,[R,W,(0,n._)("ul",Z,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(ee.userList,((e,s)=>((0,n.wg)(),(0,n.iD)(n.HY,{key:s},[e.id==ee.login_id?((0,n.wg)(),(0,n.iD)("li",{key:0,class:"list_item",onClick:s=>se.user_message(e.id)},[(0,n._)("b",null,(0,i.zw)(e.username)+" (본인)",1)],8,A)):((0,n.wg)(),(0,n.iD)("li",{key:1,class:"list_item",onClick:s=>se.user_message(e.id)},(0,i.zw)(e.username),9,E))],64)))),128))])],512),[[t.F8,ee.isOpen]]),G,(0,n._)("article",Q,[(0,n._)("span",{onClick:s[17]||(s[17]=e=>se.top())},"top"),(0,n._)("span",{onClick:s[18]||(s[18]=e=>se.bot())},"bot")])])):(0,n.kq)("",!0)])}var ee=o(920);const se={class:"modal-window"},oe={class:"modal-content"},te={class:"modal-footer"};function ne(e,s){return(0,n.wg)(),(0,n.j4)(t.uT,{name:"modal",appear:""},{default:(0,n.w5)((()=>[(0,n._)("div",{class:"modal modal-overlay",onClick:s[1]||(s[1]=(0,t.iM)((s=>e.$emit("close")),["self"]))},[(0,n._)("div",se,[(0,n._)("div",oe,[(0,n.WI)(e.$slots,"default",{},void 0,!0)]),(0,n._)("footer",te,[(0,n.WI)(e.$slots,"footer",{},(()=>[(0,n._)("button",{onClick:s[0]||(s[0]=s=>e.$emit("close"))},"Close")]),!0)])])])])),_:3})}var ie=o(744);const ae={},le=(0,ie.Z)(ae,[["render",ne],["__scopeId","data-v-15cf3d3c"]]);var re=le,ce={name:"App",components:{MyModal:re},data(){return{modal:!1,modal_msg:"",message:"",user_msg:"",username:JSON.parse(sessionStorage.getItem("userID"))?.username||"",socket:null,messages:[],userList:[],ghost_user:!1,guideMsg:"",user_id:"",isOpen:!1,login_id:"",state:JSON.parse(sessionStorage.getItem("userID"))?.state||!1}},async created(){this.socket=(0,ee.io)("192.168.0.20:3000"),this.socket.on("connection",(()=>{})),this.socket.on("messages",(e=>{console.log("서버에서 받음:",e),this.messages=e,console.log(e),this.handleClick()})),this.socket.on("userList",(e=>{console.log("서버에서 유저 정보를 받음:",e),this.userList=e,console.log(this.userList)})),this.socket.on("user_messages",(e=>{console.log("개인:",e),this.msg=e})),this.socket.on("connect",(()=>{this.login_id=this.socket.id}))},mounted(){try{const e=JSON.parse(sessionStorage.getItem("userID"))||"";console.log("login(): 로그인 유저정보를 서버로 보냄"),e.state&&this.socket.emit("roomJoin",{room:"welcome",userID:e}),e.state&&this.socket.emit("roomJoin",{room:"welcome",userID:e})}catch(e){console.log(e)}},methods:{handleClick(){this.$refs.targetRef.scrollIntoView()},ghost(){this.ghost_user=!this.ghost_user,console.log(this.ghost_user)},sendChat(){console.log("sendChat() :서버로 데이터 보냄"),console.log(this.ghost_user),this.message?(this.socket.emit("sendMessage",{message:this.message,username:this.username,ghost:this.ghost_user,id:this.login_id}),console.log(this.message),this.message=""):alert("메시지를 입력하세요")},send_user_msg(){console.log("sendChat() :서버로 데이터 보냄"),this.socket.emit("send_user",{message:this.user_msg,username:this.username}),console.log(this.message),this.user_msg=""},login(){this.state=!0;const e=JSON.stringify({state:this.state,username:this.username});sessionStorage.setItem("userID",e);const s=JSON.parse(sessionStorage.getItem("userID"));console.log("login(): 로그인 유저정보를 서버로 보냄"),this.socket.emit("roomJoin",{room:"welcome",userID:s}),this.socket.emit("loginInfo",this.username)},user_message(e){this.user_id=e,console.log(e),this.socket.emit("user_message",e)},leaveChat(){this.state=!1,this.socket.emit("leaveRoom",{room:"welcome"}),sessionStorage.clear(),this.guideMsg=this.username+"님이 방을 나가셨습니다.",console.log(this.guideMsg),this.username="",this.ghost_user=!1},openModal(){this.modal=!0},closeModal(){this.modal=!1},doSend(){""===this.username?alert("익명님 반가워요.!"):alert(this.username+"님 반가워요.!"),this.closeModal()},top(){window.scrollTo({top:0,behavior:"smooth"})},bot(){window.scrollTo({top:3e4,behavior:"smooth"})}}};const me=(0,ie.Z)(ce,[["render",X]]);var _e=me;(0,t.ri)(_e).mount("#app")}},s={};function o(t){var n=s[t];if(void 0!==n)return n.exports;var i=s[t]={exports:{}};return e[t](i,i.exports,o),i.exports}o.m=e,function(){var e=[];o.O=function(s,t,n,i){if(!t){var a=1/0;for(m=0;m<e.length;m++){t=e[m][0],n=e[m][1],i=e[m][2];for(var l=!0,r=0;r<t.length;r++)(!1&i||a>=i)&&Object.keys(o.O).every((function(e){return o.O[e](t[r])}))?t.splice(r--,1):(l=!1,i<a&&(a=i));if(l){e.splice(m--,1);var c=n();void 0!==c&&(s=c)}}return s}i=i||0;for(var m=e.length;m>0&&e[m-1][2]>i;m--)e[m]=e[m-1];e[m]=[t,n,i]}}(),function(){o.d=function(e,s){for(var t in s)o.o(s,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(s){return 0===e[s]};var s=function(s,t){var n,i,a=t[0],l=t[1],r=t[2],c=0;if(a.some((function(s){return 0!==e[s]}))){for(n in l)o.o(l,n)&&(o.m[n]=l[n]);if(r)var m=r(o)}for(s&&s(t);c<a.length;c++)i=a[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(m)},t=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))}();var t=o.O(void 0,[998],(function(){return o(501)}));t=o.O(t)})();
//# sourceMappingURL=app.bf413c57.js.map